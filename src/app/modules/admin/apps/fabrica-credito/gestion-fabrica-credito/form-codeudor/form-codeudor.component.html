<form [formGroup]="form">
    <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col">
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-4">
            <mat-form-field class="mat-form-field-disabled">
                <mat-label>Tipo de solicitante</mat-label>
                <input matInput type="text" [formControlName]="'tipodeSolicitante'" [readonly]="true" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Tipo de documento</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tipoDocumento'"
                    (selectionChange)="cambiarNacionalidad($event)">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let item of dataInicial?.tiposDocumentos" [disabled]="item.codigo === 'CE'"
                        [value]="item.codigo">{{ item.valor }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'heroicons_outline:identification'">
                </mat-icon>
                <mat-error *ngIf="form.controls.tipoDocumento.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>No. de identificación</mat-label>
                <input matInput type="text" [mask]="tipoDocumento?.value === 'CE' ? '' : 'separator.0'"
                    [thousandSeparator]="tipoDocumento?.value === 'CE' ? '' :  '.'"
                    [minlength]="tipoDocumento?.value === 'CE' ? 6 : 5"
                    [maxlength]="tipoDocumento?.value === 'CE' ? 7 : 13" [formControlName]="'identificacion'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'heroicons_outline:identification'">
                </mat-icon>
                <mat-error *ngIf="form.controls.identificacion.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.identificacion.errors?.minlength">
                    No puede ser menor a {{tipoDocumento?.value === 'CE' ? 6 : 5}} digitos
                </mat-error>
                <mat-error *ngIf="form.controls.identificacion.errors?.maxlength">
                    No puede ser menor a {{tipoDocumento?.value === 'CE' ? 7 : 10}} digitos
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Celular </mat-label>
                <input matInput mask="(000) 000 00 00" type="text" [formControlName]="'celular'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.celular.dirty ||
                        form.controls.celular.touched
                    ">
                    <mat-error *ngIf="form.controls.celular.errors?.required">Este campo es requerido.</mat-error>
                    <mat-error *ngIf="
                                            form.controls.celular.errors
                                                ?.pattern
                                        ">Debe comenzar en 3.</mat-error>
                    <mat-error *ngIf="form.controls.celular.errors?.minlength">Longitud mínima son 7
                        dígitos.</mat-error>
                    <mat-error *ngIf="form.controls.celular.errors?.maxlength">Longitud máxima son 11
                        dígitos.</mat-error>
                </mat-error>
            </mat-form-field>
        </div>

        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-4">
            <mat-form-field>
                <mat-label>Primer nombre</mat-label>
                <input matInput type="text" [formControlName]="'primerNombre'" (keyup)="
                        form.controls.nombreCompleto.setValue(
                            form.controls.primerNombre.value +
                                ' ' +
                                form.controls.segundoNombre.value +
                                ' ' +
                                form.controls.primerApellido.value +
                                ' ' +
                                form.controls.segundoApellido.value
                        )
                    " />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.primerNombre.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.primerNombre.errors?.pattern">
                    No se permiten caracteres especiales ni números
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Segundo nombre</mat-label>
                <input matInput type="text" [formControlName]="'segundoNombre'" (keyup)="
                        form.controls.nombreCompleto.setValue(
                            form.controls.primerNombre.value +
                                ' ' +
                                form.controls.segundoNombre.value +
                                ' ' +
                                form.controls.primerApellido.value +
                                ' ' +
                                form.controls.segundoApellido.value
                        )
                    " />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.segundoNombre.errors?.pattern">
                    No se permiten caracteres especiales ni números
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Primer apellido</mat-label>
                <input matInput type="text" [formControlName]="'primerApellido'" (keyup)="
                        form.controls.nombreCompleto.setValue(
                            form.controls.primerNombre.value +
                                ' ' +
                                form.controls.segundoNombre.value +
                                ' ' +
                                form.controls.primerApellido.value +
                                ' ' +
                                form.controls.segundoApellido.value
                        )
                    " />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.primerApellido.errors?.required">Este campo es requerido.</mat-error>
                <mat-error *ngIf="form.controls.primerApellido.errors?.pattern">
                    No se permiten caracteres especiales ni números
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Segundo apellido</mat-label>
                <input matInput type="text" [formControlName]="'segundoApellido'" (keyup)="
                        form.controls.nombreCompleto.setValue(
                            form.controls.primerNombre.value +
                                ' ' +
                                form.controls.segundoNombre.value +
                                ' ' +
                                form.controls.primerApellido.value +
                                ' ' +
                                form.controls.segundoApellido.value
                        )
                    " />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.segundoApellido.errors?.pattern">
                    No se permiten caracteres especiales ni números
                </mat-error>
            </mat-form-field>
        </div>
        <mat-form-field class="col-span-2 mat-form-field-disabled">
            <mat-label>Nombre completo del titular</mat-label>
            <input matInput type="text" [formControlName]="'nombreCompleto'" [readonly]="true" />
        </mat-form-field>
        <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Información personal del codeudor</span>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-4">
            <mat-form-field>
                <mat-label>Estado civil</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'estadoCivil'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let item of dataInicial?.estadoCivil" [value]="item.codigo">{{ item.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.estadoCivil.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Email</mat-label>
                <input matInput type="text" [formControlName]="'email'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.email.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.email.errors?.email">
                    Correo invalido
                </mat-error>
            </mat-form-field>
            <ng-container>
                <mat-form-field>
                    <mat-label>Género</mat-label>
                    <mat-select [value]="'seleccione'" [formControlName]="'genero'">
                        <mat-option disabled [value]="'seleccione'">Seleccione
                        </mat-option>
                        <mat-option *ngFor="let genero of dataInicial?.generos" [value]="genero.codigo">{{ genero.nombre
                            }}
                        </mat-option>
                    </mat-select>
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="form.controls.genero.errors?.required">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Nacionalidad</mat-label>
                    <input matInput type="text" [formControlName]="'nacionalidad'"
                        [readonly]="form.controls.tipoDocumento.value === 'CC'" />
                    <mat-icon *ngIf="form.controls.tipoDocumento.value !== 'CC'" class="icon-size-5" matSuffix
                        [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="form.controls.nacionalidad.errors?.required">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
            </ng-container>
        </div>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-4">
            <mat-form-field>
                <mat-label>Fecha de nacimiento </mat-label>
                <input matInput placeholder="DD/MM/YYYY" [matDatepicker]="fechaNacimiento"
                    [formControlName]="'fechaNacimiento'" (dateChange)="
                        validacionCampos(
                            'Fecha de nacimiento',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'fechaNacimiento',
                            'STRING'
                        )
                    " />
                <mat-datepicker-toggle matSuffix [for]="fechaNacimiento">
                </mat-datepicker-toggle>
                <mat-datepicker #fechaNacimiento></mat-datepicker>
                <mat-error *ngIf="form.controls.fechaNacimiento.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.fechaNacimiento.errors?.dateError">
                    La fecha no puede ser mayor al día de hoy.
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Nivel de estudio</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'nivelEstudio'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let item of dataInicial?.nivelesEstudio" [value]="item.codigoOpcion">{{
                        item.descripcionOpcion }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.nivelEstudio.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Número de hijos</mat-label>
                <input matInput type="text" [formControlName]="'numeroHijos'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.numeroHijos.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.numeroHijos.errors?.minLength">
                    No puede ser menor de 0
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Personas a cargo</mat-label>
                <input matInput type="text" [formControlName]="'personasACargo'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.personasACargo.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.personasACargo.errors?.minLength">
                    No puede ser menor de 0
                </mat-error>
            </mat-form-field>
        </div>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-4">
            <mat-form-field>
                <mat-label>Fecha de expedición </mat-label>
                <input matInput placeholder="DD/MM/YYYY" [matDatepicker]="fechaExpedicionDocumento"
                    [formControlName]="'fechaExpedicion'" />
                <mat-datepicker-toggle matSuffix [for]="fechaExpedicionDocumento" [disabled]="false">
                </mat-datepicker-toggle>
                <mat-datepicker #fechaExpedicionDocumento readonly></mat-datepicker>
                <mat-error *ngIf="form.controls.fechaExpedicion.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.fechaExpedicion.errors?.dateError">
                    La fecha no puede ser mayor al día de hoy.
                </mat-error>
                <mat-error *ngIf="form.controls.fechaExpedicion.errors?.expedicionDate">
                    La fecha no puede ser menor de 18 años de la fecha de nacimiento.
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Departamento de expedición</mat-label>
                <mat-select (selectionChange)="seleccionDepartamentoExpedicion($event) " [value]="'seleccione'"
                    [formControlName]="'codigoDepartamentoExpedicion'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="
                            let departamento of dataInicial?.deparamentosGenerales
                        " [value]="departamento.codigo">{{ departamento.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.codigoDepartamentoExpedicion.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <ng-container *ngIf="ciudadesExpedicion$ | async as ciudades">
                <mat-form-field>
                    <mat-label>Ciudad de expedición</mat-label>
                    <mat-select [value]="'seleccione'" [formControlName]="'codigoCiudadExpedicion'">
                        <mat-option disabled [value]="'seleccione'">Seleccione
                        </mat-option>
                        <mat-option *ngFor="let ciudad of ciudades.data" [value]="ciudad.codigo">
                            {{ ciudad.nombre }}
                        </mat-option>
                    </mat-select>
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="
                            form.controls.codigoCiudadExpedicion.errors
                                ?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
            </ng-container>
        </div>
        <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Información de residencia</span>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-3">
            <mat-form-field>
                <mat-label>Departamento de residencia</mat-label>
                <mat-select (selectionChange)="seleccionDepartamento($event)" [value]="'seleccione'"
                    [formControlName]="'codigoDepartamento'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="
                            let departamento of dataInicial?.deparamentosGenerales
                        " [value]="departamento.codigo">{{ departamento.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.codigoDepartamento.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <ng-container *ngIf="ciudades$ | async as ciudades">
                <mat-form-field>
                    <mat-label>Ciudad</mat-label>
                    <mat-select [value]="'seleccione'" [formControlName]="'codigoCiudad'"
                        (selectionChange)="seleccionCiudad($event)">
                        <mat-option disabled [value]="'seleccione'">Seleccione
                        </mat-option>
                        <mat-option *ngFor="let ciudad of ciudades.data" [value]="ciudad.codigo">
                            {{ ciudad.nombre }}
                        </mat-option>
                    </mat-select>
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="form.controls.codigoCiudad.errors?.required">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
            </ng-container>

            <ng-container *ngIf="barrios$ | async as barrios">
                <mat-form-field>
                    <mat-label>Barrio</mat-label>
                    <mat-select [value]="'seleccione'" [formControlName]="'barrioResidencia'">
                        <mat-option disabled [value]="'seleccione'">Seleccione
                        </mat-option>
                        <mat-option *ngFor="let barrio of barrios.data" [value]="barrio.codigo">
                            {{ barrio.nombre }}
                        </mat-option>
                    </mat-select>
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="form.controls.barrioResidencia.errors?.required">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
            </ng-container>
        </div>

        <div class="grid gap-2 sm:grid-cols-4 grid-cols-1">
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Tipo de via</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'direccionTipoVia'" (selectionChange)="
                        form.controls.direccionResidencial.setValue(
                            form.controls.direccionTipoVia.value +
                                ' ' +
                                form.controls.direccionViaPrincipal.value +
                                ' # ' +
                                form.controls.direccionNumeroVia.value +
                                ' - ' +
                                form.controls.direccionDistanciaVia.value +
                                ' ' +
                                form.controls.direccionComplemento.value
                        )
                    ">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let tipoVia of dataInicial?.nomenclarturas" [value]="tipoVia.nombre">
                        {{ tipoVia.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.direccionTipoVia.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Via principal</mat-label>
                <input (keyup)="
                        form.controls.direccionResidencial.setValue(
                            form.controls.direccionTipoVia.value +
                                ' ' +
                                form.controls.direccionViaPrincipal.value +
                                ' # ' +
                                form.controls.direccionNumeroVia.value +
                                ' - ' +
                                form.controls.direccionDistanciaVia.value +
                                ' ' +
                                form.controls.direccionComplemento.value
                        )
                    " matInput type="text" [formControlName]="'direccionViaPrincipal'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.direccionViaPrincipal.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <mat-form-field class="fuse-mat-dense">
                <mat-label>Número vía</mat-label>
                <input matInput type="text" (keyup)="
                        form.controls.direccionResidencial.setValue(
                            form.controls.direccionTipoVia.value +
                                ' ' +
                                form.controls.direccionViaPrincipal.value +
                                ' # ' +
                                form.controls.direccionNumeroVia.value +
                                ' - ' +
                                form.controls.direccionDistanciaVia.value +
                                ' ' +
                                form.controls.direccionComplemento.value
                        )
                    " [formControlName]="'direccionNumeroVia'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.direccionNumeroVia.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Distancia vía</mat-label>
                <input matInput type="text" (keyup)="
                        form.controls.direccionResidencial.setValue(
                            form.controls.direccionTipoVia.value +
                                ' ' +
                                form.controls.direccionViaPrincipal.value +
                                ' # ' +
                                form.controls.direccionNumeroVia.value +
                                ' - ' +
                                form.controls.direccionDistanciaVia.value +
                                ' ' +
                                form.controls.direccionComplemento.value
                        )
                    " [formControlName]="'direccionDistanciaVia'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.direccionDistanciaVia.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>

        <mat-form-field class="sm:col-span-1 md:col-span-1">
            <mat-label class="fuse-mat-dense">Complemento</mat-label>
            <input matInput type="text" [formControlName]="'direccionComplemento'" (keyup)="
                    form.controls.direccionResidencial.setValue(
                        form.controls.direccionTipoVia.value +
                            ' ' +
                            form.controls.direccionViaPrincipal.value +
                            ' # ' +
                            form.controls.direccionNumeroVia.value +
                            ' - ' +
                            form.controls.direccionDistanciaVia.value +
                            ' ' +
                            form.controls.direccionComplemento.value
                    )
                " />
            <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
            </mat-icon>
        </mat-form-field>
        <mat-form-field class="sm:col-span-1 md:col-span-1 mat-form-field-disabled">
            <mat-label>Dirección completa</mat-label>
            <input matInput type="text" [formControlName]="'direccionResidencial'" readonly="true" />
        </mat-form-field>
        <div class="grid gap-2 sm:grid-cols-2 grid-cols-1">
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Años de residencia</mat-label>
                <input matInput type="number" [formControlName]="'annosTiempoResidencia'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.annosTiempoResidencia.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.annosTiempoResidencia.errors?.pattern">
                    No se aceptan número negativos.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Meses de residencia</mat-label>
                <input autocomplete="off" matInput type="number" [formControlName]="'mesesTiempoResidencia'" min="0"
                    max="11" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.mesesTiempoResidencia.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.mesesTiempoResidencia.errors?.pattern">
                    No se aceptan número negativos.
                </mat-error>
                <mat-error *ngIf="form.controls.mesesTiempoResidencia.errors?.max">
                    Máximo 11 meses.
                </mat-error>
            </mat-form-field>
        </div>
        <div class="grid gap-2 sm:grid-cols-2 grid-cols-1">
            <mat-form-field>
                <mat-label>Tipo de vivienda</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tipoVivienda'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let item of dataInicial?.tiposVivienda" [value]="item.codigo">
                        {{ item.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.tipoVivienda?.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Estrato</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'estrato'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let item of dataInicial?.estratosVivienda" [value]="item.codigo">
                        {{ item.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.estrato.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>
        <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Información de actividad
            económica</span>
        <mat-form-field>
            <mat-label>Ocupación </mat-label>
            <mat-select [value]="'seleccione'" [formControlName]="'ocupacion'"
                (selectionChange)="cargarActividadEconomica($event)">
                <mat-option disabled [value]="'seleccione'">Seleccione
                </mat-option>
                <mat-option *ngFor="let ocupacion of dataInicial?.ocupaciones" [value]="ocupacion.codigo">{{
                    ocupacion.nombre }}
                </mat-option>
            </mat-select>
            <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
            <mat-error *ngIf="form.controls.ocupacion.errors?.required">
                Este campo es requerido.
            </mat-error>
        </mat-form-field>
        <div *ngIf="form.controls.ocupacion.value === 'EPLDO'" class="grid gap-2 sm:grid-cols-2 grid-cols-1">
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Nombre de la empresa</mat-label>
                <input autocomplete="off" matInput type="text" [formControlName]="'nombreEmpresa'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.nombreEmpresa.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Teléfono de la empresa</mat-label>
                <input autocomplete="off" mask="(000) 000 00 00" [validation]="false" [minlength]="7" [maxlength]="16"
                    matInput type="text" [formControlName]="'telefonoEmpresa'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.telefonoEmpresa.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="
                form.controls.telefonoEmpresa.errors
                    ?.minlength
            ">
                    Debe tener mínimo 7 dígitos
                </mat-error>
                <mat-error *ngIf="
                form.controls.telefonoEmpresa.errors
                    ?.maxlength
            ">
                    Debe tener máximo 10 dígitos
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Dirección de la empresa</mat-label>
                <input autocomplete="off" matInput type="text" [formControlName]="'direccionEmpresa'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.direccionEmpresa.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Tipo de contrato </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tipoContrato'" [matTooltip]="'Tipo de contrato'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let contratos of dataInicial?.tiposContratos" [value]="contratos.codigo">{{
                        contratos.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.tipoContrato.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Cargo</mat-label>
                <input autocomplete="off" matInput type="text" [formControlName]="'cargo'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.cargo.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Salario</mat-label>
                <span matPrefix>$</span>
                <input autocomplete="off" mask="separator.0" thousandSeparator="." matInput type="text"
                    [formControlName]="'salarioBasico'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.salarioBasico.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Fecha de ingreso</mat-label>
                <input matInput placeholder="DD/MM/YYYY" [matDatepicker]="fechaIngresoFabrica"
                    [formControlName]="'fechaIngresoFabrica'" />
                <mat-datepicker-toggle matSuffix [for]="fechaIngresoFabrica">
                </mat-datepicker-toggle>
                <mat-datepicker #fechaIngresoFabrica></mat-datepicker>

                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.fechaIngresoFabrica.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.fechaIngresoFabrica.errors?.dateError">
                    La fecha no puede ser mayor al día de hoy.
                </mat-error>
            </mat-form-field>
        </div>
        <!-- Si es independiente -->
        <div *ngIf="
                form.controls.ocupacion.value === 'INDEFO' ||
                form.controls.ocupacion.value === 'PROIN' ||
                form.controls.ocupacion.value === 'INDNFO'
            " class="grid gap-2 sm:grid-cols-4 grid-cols-1">
            <mat-form-field *ngIf="actividadEconomica$ | async as actividadEconomica">
                <mat-label>Actividad económica </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'actividadEconomica'" (selectionChange)="validacionCampos(
                            'Actividad económica',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'actividadEconomica',
                            'STRING'
                        )">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let ocupacion of actividadEconomica.data" [value]="ocupacion.codigo">{{
                        ocupacion.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.actividadEconomica.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Actividad específica</mat-label>
                <input autocomplete="off" matInput type="text" [formControlName]="'actividadEspecifica'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.actividadEspecifica.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <mat-form-field class="fuse-mat-dense">
                <mat-label>Nombre comercial microempresa</mat-label>
                <input autocomplete="off" matInput type="text" [formControlName]="'nombreNegocio'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.nombreNegocio.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Registrado en cámara de comercio </mat-label>
                <mat-select [value]="'seleccione'" (selectionChange)="validacionCampos(
                            'Registrado en cámara de comercio',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'camaraComercio',
                            'STRING'
                        )" [formControlName]="'camaraComercio'" [matTooltip]="
                        '¿Se encuentra registrado en camára de comercio?'
                    ">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option value="S">Si </mat-option>
                    <mat-option value="N">No </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.camaraComercio.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <mat-form-field *ngIf="
                    form.controls.camaraComercio.value === 'S' &&
                    (form.controls.ocupacion.value === 'INDNFO' ||
                        form.controls.ocupacion.value === 'PROIN' ||
                        form.controls.ocupacion.value === 'INDEFO')
                ">
                <mat-label>N° de ID en cámara de comercio </mat-label>
                <input autocomplete="off" matInput type="text" mask="separator.0" thousandSeparator="."
                    [formControlName]="'nitNegocio'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.nitNegocio.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.nitNegocio.errors?.minlength">
                    Mínimo 9 digitos
                </mat-error>
                <mat-error *ngIf="form.controls.nitNegocio.errors?.maxlength">
                    Maximo 10 digitos
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Experiencia en la actividad </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'experienciaActividad'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let ocupacion of dataInicial?.antiguedadLocal" [value]="ocupacion.codigo">{{
                        ocupacion.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.experienciaActividad.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Departamento del negocio </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'codigoDepartamentoNegocio'" (selectionChange)="seleccionDepartamentoNegocio($event); validacionCampos(
                            'Departamento del negocio',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'codigoDepartamentoNegocio',
                            'STRING'
                        )">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="
                            let departamento of dataInicial?.deparamentosGenerales
                        " [value]="departamento.codigo">{{ departamento.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="
                        form.controls.codigoDepartamentoNegocio.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <ng-container *ngIf="ciudadesNegocio$ | async as ciudades">
                <mat-form-field>
                    <mat-label>Municipio / Ciudad del negocio</mat-label>
                    <mat-select [value]="'seleccione'" [formControlName]="'codigoCiudadNegocio'" (selectionChange)="seleccionCiudadNegocio($event); validacionCampos(
                            'Municipio / Ciudad del negocio',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'codigoCiudadNegocio',
                            'STRING'
                        )">
                        <mat-option disabled [value]="'seleccione'">Seleccione
                        </mat-option>
                        <mat-option *ngFor="let ciudad of ciudades.data" [value]="ciudad.codigo">
                            {{ ciudad.nombre }}
                        </mat-option>
                    </mat-select>
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="
                            form.controls.codigoCiudadNegocio.errors?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
            </ng-container>
            <ng-container *ngIf="barrios$ | async as barrios">
                <mat-form-field>
                    <mat-label>Barrio del negocio</mat-label>
                    <mat-select [value]="'seleccione'" (selectionChange)="validacionCampos(
                            'Barrio del negocio',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'codigoBarrioNegocio',
                            'STRING'
                        )" [formControlName]="'codigoBarrioNegocio'">
                        <mat-option disabled [value]="'seleccione'">Seleccione
                        </mat-option>
                        <mat-option *ngFor="let barrio of barrios.data" [value]="barrio.codigo">
                            {{ barrio.nombre }}
                        </mat-option>
                    </mat-select>
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="
                            form.controls.codigoBarrioNegocio.errors?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
            </ng-container>
        </div>
        <ng-container *ngIf="
                form.controls.ocupacion.value === 'INDNFO' ||
                form.controls.ocupacion.value === 'PROIN' ||
                form.controls.ocupacion.value === 'INDEFO'
            ">
            <div class="grid gap-2 sm:grid-cols-4 grid-cols-1">
                <mat-form-field class="fuse-mat-dense">
                    <mat-label>Tipo de via</mat-label>
                    <mat-select [value]="'seleccione'" [formControlName]="'direccionNegocioVia'" (selectionChange)="
                            form.controls.direccionNegocio.setValue(
                                form.controls.direccionNegocioVia.value +
                                    ' ' +
                                    form.controls.direccionNegocioPrincipal
                                        .value +
                                    ' # ' +
                                    form.controls.direccionNegocioNroVia.value +
                                    ' - ' +
                                    form.controls.direccionNegocioDistanciaVia
                                        .value +
                                    ' ' +
                                    form.controls.direccionNegocioCompleto.value
                            )
                        ">
                        <mat-option disabled [value]="'seleccione'">Seleccione
                        </mat-option>
                        <mat-option *ngFor="let tipoVia of dataInicial?.nomenclarturas" [value]="tipoVia.nombre">
                            {{ tipoVia.nombre }}
                        </mat-option>
                    </mat-select>
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="
                            form.controls.direccionNegocioVia.errors?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="fuse-mat-dense">
                    <mat-label>Via principal</mat-label>
                    <input (keyup)="
                            form.controls.direccionNegocio.setValue(
                                form.controls.direccionNegocioVia.value +
                                    ' ' +
                                    form.controls.direccionNegocioPrincipal
                                        .value +
                                    ' # ' +
                                    form.controls.direccionNegocioNroVia.value +
                                    ' - ' +
                                    form.controls.direccionNegocioDistanciaVia
                                        .value +
                                    ' ' +
                                    form.controls.direccionNegocioCompleto.value
                            )
                        " matInput type="text" [formControlName]="'direccionNegocioPrincipal'" />
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="
                            form.controls.direccionNegocioPrincipal.errors
                                ?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="fuse-mat-dense">
                    <mat-label>Número vía</mat-label>
                    <input matInput type="text" (keyup)="
                            form.controls.direccionNegocio.setValue(
                                form.controls.direccionNegocioVia.value +
                                    ' ' +
                                    form.controls.direccionNegocioPrincipal
                                        .value +
                                    ' # ' +
                                    form.controls.direccionNegocioNroVia.value +
                                    ' - ' +
                                    form.controls.direccionNegocioDistanciaVia
                                        .value +
                                    ' ' +
                                    form.controls.direccionNegocioCompleto.value
                            )
                        " [formControlName]="'direccionNegocioNroVia'" />
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="
                            form.controls.direccionNegocioNroVia.errors
                                ?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="fuse-mat-dense">
                    <mat-label>Distancia vía</mat-label>
                    <input matInput type="text" (keyup)="
                            form.controls.direccionNegocio.setValue(
                                form.controls.direccionNegocioVia.value +
                                    ' ' +
                                    form.controls.direccionNegocioPrincipal
                                        .value +
                                    ' # ' +
                                    form.controls.direccionNegocioNroVia.value +
                                    ' - ' +
                                    form.controls.direccionNegocioDistanciaVia
                                        .value +
                                    ' ' +
                                    form.controls.direccionNegocioCompleto.value
                            )
                        " [formControlName]="'direccionNegocioDistanciaVia'" />
                    <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    </mat-icon>
                    <mat-error *ngIf="
                            form.controls.direccionNegocioDistanciaVia.errors
                                ?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-form-field>
            </div>

            <mat-form-field class="sm:col-span-1 md:col-span-1">
                <mat-label>Complemento</mat-label>
                <input matInput type="text" (keyup)="
                        form.controls.direccionNegocio.setValue(
                            form.controls.direccionNegocioVia.value +
                                ' ' +
                                form.controls.direccionNegocioPrincipal.value +
                                ' # ' +
                                form.controls.direccionNegocioNroVia.value +
                                ' - ' +
                                form.controls.direccionNegocioDistanciaVia
                                    .value +
                                ' ' +
                                form.controls.direccionNegocioCompleto.value
                        )
                    " [formControlName]="'direccionNegocioCompleto'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                    <mat-error *ngIf="
                            form.controls.direccionNegocioCompleto.errors
                                ?.required
                        ">
                        Este campo es requerido.
                    </mat-error>
                </mat-icon>
            </mat-form-field>

            <mat-form-field class="sm:col-span-1 md:col-span-1">
                <mat-label>Dirección del negocio</mat-label>
                <input matInput type="text" [readonly]="true" [formControlName]="'direccionNegocio'" />
            </mat-form-field>
        </ng-container>
        <div *ngIf="
                form.controls.ocupacion.value === 'INDEFO' ||
                form.controls.ocupacion.value === 'PROIN' ||
                form.controls.ocupacion.value === 'INDNFO'
            " class="grid gap-2 sm:grid-cols-4 grid-cols-1">
            <mat-form-field>
                <mat-label>Teléfono / celular del negocio</mat-label>
                <input matInput type="text" mask="(000) 000 00 00" [validation]="false" [minlength]="7" [maxlength]="16"
                    [formControlName]="'telefonoNegocio'" />
                <mat-error *ngIf="
                form.controls.telefonoNegocio.errors
                    ?.minlength
            ">
                    Debe tener mínimo 7 dígitos
                </mat-error>
                <mat-error *ngIf="
                form.controls.telefonoNegocio.errors
                    ?.maxlength
            ">
                    Debe tener máximo 10 dígitos
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Ubicación del negocio </mat-label>
                <mat-select (selectionChange)="validacionCampos(
                            'Ubicación del negocio',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'tipoUbicacionNegocio',
                            'STRING'
                        )" [value]="'seleccione'" [formControlName]="'tipoUbicacionNegocio'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let ocupacion of dataInicial?.tipoUbicacion" [value]="ocupacion.codigo">{{
                        ocupacion.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.tipoUbicacionNegocio.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Tipo de local </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tipoLocal'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let ocupacion of dataInicial?.tiposVivienda" [value]="ocupacion.codigo">{{
                        ocupacion.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.tipoUbicacionNegocio.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Antigüedad en local actual </mat-label>
                <mat-select (selectionChange)="validacionCampos(
                            'Antigüedad en local actual',
                            'Este campo modifica el motor de decisión y políticas SARC',
                            'antiguedadLocal',
                            'INTEGER'
                        )" [value]="'seleccione'" [formControlName]="'antiguedadLocal'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let ocupacion of dataInicial?.antiguedadLocal" [value]="ocupacion.codigo">{{
                        ocupacion.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.antiguedadLocal.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>N° de empleados </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'numeroEmpleados'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let ocupacion of dataInicial?.numeroEmpleados" [value]="ocupacion.codigo">{{
                        ocupacion.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.numeroEmpleados.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Estabilidad puesto de trabajo </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'estabilidadPuesto'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let ocupacion of dataInicial?.ubicacionesLocal" [value]="ocupacion.codigo">{{
                        ocupacion.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.estabilidadPuesto.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>¿Tiene otros puntos de venta? </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tieneOtrosPuntos'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option value="S">Si </mat-option>
                    <mat-option value="N">No </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'"></mat-icon>
                <mat-error *ngIf="form.controls.tieneOtrosPuntos.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Nombre del que atiende el negocio</mat-label>
                <input matInput type="text" [formControlName]="'nombreAtiendeNegocio'" matTooltip="En caso de enfermedad o situación que requiera la no presencia del
titular" />
            </mat-form-field>
        </div>
        <!-- Si es pensionado -->
        <div *ngIf="form.controls.ocupacion.value === 'PENSI'" class="grid gap-2 sm:grid-cols-2 grid-cols-1">
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Nombre de la empresa</mat-label>
                <input autocomplete="off" matInput type="text" [formControlName]="'nombreEmpresa'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.nombreEmpresa.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>¿Hace cuánto está pensionado? (Meses)</mat-label>
                <input autocomplete="off" matInput type="number" [formControlName]="'tiempoPensionado'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.tiempoPensionado.errors?.required">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="form.controls.tiempoPensionado.errors?.pattern">
                    Solo se aceptan números.
                </mat-error>
            </mat-form-field>
            <mat-form-field class="fuse-mat-dense">
                <mat-label>Salario</mat-label>
                <span matPrefix>$</span>
                <input autocomplete="off" matInput type="text" mask="separator.0" [formControlName]="'salarioBasico'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.salarioBasico.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>
        <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Información legal - cliente PEP</span>
        <div class="grid gap-3 grid-cols-1">
            <mat-form-field>
                <mat-label>¿Ha ocupado cargos públicos?</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'legalCargoPublico'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.legalCargoPublico.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>¿Es familiar de persona expuesta política y
                    públicamente?</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'legalPersonalExpuesta'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="form.controls.legalPersonalExpuesta.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>¿ Tiene a su cargo la dirección de recursos en algún
                    partido político ?</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'legalCargoPartidoPolitico'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.legalCargoPartidoPolitico.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>
        <span *ngIf="form.controls.legalCargoPublico.value === 'S'"
            class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Datos cargo público</span>

        <div *ngIf="form.controls.legalCargoPublico.value === 'S'"
            class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-4">
            <mat-form-field>
                <mat-label>Cargo</mat-label>
                <input matInput type="text" [formControlName]="'cargoPublico'" />
                <mat-error *ngIf="form.controls.cargoPublico.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Entidad</mat-label>
                <input matInput type="text" [formControlName]="'entidadPublico'" />
                <mat-error *ngIf="form.controls.entidadPublico.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>¿Estás vinculado actualmente?</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'vinculadoActualPublico'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-error *ngIf="
                        form.controls.vinculadoActualPublico.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field *ngIf="form.controls.vinculadoActualPublico.value === 'N'">
                <mat-label>Fecha de desvinculación</mat-label>
                <input matInput placeholder="DD/MM/YYYY" [matDatepicker]="fechaDesvinculacionPublico"
                    [formControlName]="'fechaDesvinculacionPublico'" />
                <mat-datepicker-toggle matSuffix [for]="fechaDesvinculacionPublico" [disabled]="false">
                </mat-datepicker-toggle>
                <mat-datepicker #fechaDesvinculacionPublico readonly></mat-datepicker>
                <mat-error *ngIf="
                        form.controls.fechaDesvinculacionPublico.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="
                        form.controls.fechaDesvinculacionPublico.errors
                            ?.dateError
                    ">
                    La fecha no puede ser mayor al día de hoy.
                </mat-error>
            </mat-form-field>
        </div>
        <span *ngIf="form.controls.legalPersonalExpuesta.value === 'S'"
            class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Datos cargo público-Familiar</span>
        <div *ngIf="form.controls.legalPersonalExpuesta.value === 'S'"
            class="grid gap-3 sm:grid-cols-2 grid-cols-1 md:grid-cols-4">
            <mat-form-field>
                <mat-label>Vinculación / Relación</mat-label>
                <input matInput type="text" [formControlName]="'vinculacionExpuesta'" />
                <mat-error *ngIf="form.controls.vinculacionExpuesta.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Nombre y apellido</mat-label>
                <input matInput type="text" [formControlName]="'nombreExpuesta'" />
                <mat-error *ngIf="form.controls.nombreExpuesta.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Tipo de ID</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tipoIdentificacionExpuesta'">
                    <mat-option *ngFor="let item of dataInicial?.tiposDocumentos" [value]="item.codigo">{{ item.valor }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="
                        form.controls.tipoIdentificacionExpuesta.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label> N° de identificación</mat-label>
                <input matInput type="text" mask="separator.0" thousandSeparator="."
                    [formControlName]="'identificacionExpuesta'" />
                <mat-error *ngIf="
                        form.controls.identificacionExpuesta.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label> Nacionalidad</mat-label>
                <input matInput type="text" [formControlName]="'nacionalidadExpuesta'" />
                <mat-error *ngIf="form.controls.nacionalidadExpuesta.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label> Entidad</mat-label>
                <input matInput type="text" [formControlName]="'entidadExpuesta'" />
                <mat-error *ngIf="form.controls.entidadExpuesta.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label> Cargo</mat-label>
                <input matInput type="text" [formControlName]="'cargoExpuesta'" />
                <mat-error *ngIf="form.controls.cargoExpuesta.errors?.required">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>¿Estás vinculado actualmente?</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'vinculadoActualExpuesta'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-error *ngIf="
                        form.controls.vinculadoActualExpuesta.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>

            <mat-form-field *ngIf="form.controls.vinculadoActualExpuesta.value === 'N'">
                <mat-label>Fecha de desvinculación</mat-label>
                <input matInput placeholder="DD/MM/YYYY" [matDatepicker]="fechaDesvinculacionExpuesta"
                    [formControlName]="'fechaDesvinculacionExpuesta'" />
                <mat-datepicker-toggle matSuffix [for]="fechaDesvinculacionExpuesta" [disabled]="false">
                </mat-datepicker-toggle>
                <mat-datepicker #fechaDesvinculacionExpuesta readonly></mat-datepicker>
                <mat-error *ngIf="
                        form.controls.fechaDesvinculacionExpuesta.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
                <mat-error *ngIf="
                        form.controls.fechaDesvinculacionExpuesta.errors
                            ?.dateError
                    ">
                    La fecha no puede ser mayor al día de hoy.
                </mat-error>
            </mat-form-field>
        </div>
        <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Información legal -Datos
            Sagrilaft</span>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1">
            <mat-form-field>
                <mat-label>¿Realiza operaciones con moneda extranjera?
                </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'legalOperacionExtranjera'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.legalOperacionExtranjera.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field *ngIf="form.controls.legalOperacionExtranjera.value == 'S'">
                <mat-label>Tipo de operación</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tipoOperacionExtranjera'">
                    <mat-option *ngFor="
                            let item of dataInicial?.tipoOperacionExtranjera
                        " [value]="item.codigo">
                        {{ item.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.tipoOperacionExtranjera.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1">
            <mat-form-field>
                <mat-label>¿Realiza operaciones con criptomoneda?</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'legalOperacionCriptomoneda'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.legalOperacionCriptomoneda.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field *ngIf="form.controls.legalOperacionCriptomoneda.value == 'S'">
                <mat-label>Tipo de operación</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'tipoOperacionCriptomoneda'">
                    <mat-option *ngFor="let item of dataInicial?.tipoOperacionCripto" [value]="item.codigo">
                        {{ item.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.tipoOperacionCriptomoneda.errors?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1">
            <mat-form-field>
                <mat-label>¿Desarrolla actividades y profesiones no financieras
                    designadas (APNFD)?
                </mat-label>
                <mat-select [value]="'seleccione'" matTooltip="*Actividades APNFD (Actividades y profesiones no financieras
                designadas: se refiere según el GAFI: a) Casinos; b) agentes inmobiliarios; c) comerciantes
                de metales preciosos; d) comerciantes de piedras preciosas; e) abogados, notarios, otros
                profesionales jurídicos independientes o contadores."
                    [formControlName]="'legalDesarrollaActividadApnfd'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.legalDesarrollaActividadApnfd.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>¿Es responsable de declarar renta y complementarios?
                </mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'declaraRenta'">
                    <mat-option disabled [value]="''">Seleccione </mat-option>
                    <mat-option [value]="'S'">SI </mat-option>
                    <mat-option [value]="'N'">NO </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.declaraRenta.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>

        <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Información legal -Declaraciones y
            Autorizaciones</span>
        <div class="grid gap-3 sm:grid-cols-2 grid-cols-1">
            <mat-form-field>
                <mat-label>El cliente declara que sus ingresos provienen de</mat-label>
                <mat-select [value]="'seleccione'" [formControlName]="'declaroIngresoDeclaracionAuto'">
                    <mat-option disabled [value]="'seleccione'">Seleccione
                    </mat-option>
                    <mat-option *ngFor="let item of dataInicial?.declaracionIngresos" [value]="item.codigo">
                        {{ item.nombre }}
                    </mat-option>
                </mat-select>
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.declaroIngresoDeclaracionAuto.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
            <mat-form-field *ngIf="
                    form.controls.declaroIngresoDeclaracionAuto.value === 'OT'
                ">
                <mat-label>Otro</mat-label>
                <input matInput type="text" [formControlName]="'otroIngresoDeclaracionAuto'" />
                <mat-icon class="icon-size-5" matSuffix [svgIcon]="'mat_outline:edit'">
                </mat-icon>
                <mat-error *ngIf="
                        form.controls.otroIngresoDeclaracionAuto.errors
                            ?.required
                    ">
                    Este campo es requerido.
                </mat-error>
            </mat-form-field>
        </div>
        <!-- <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">Terminos y
            condiciones</span>

        <div class="grid grid-cols-1">
            <mat-checkbox class="ml-3" formControlName="autoricacionDatosPersonalClaracionAuto"> <a
                    href="./assets/documentos/documentosMicroForms/datos_personales.pdf" class="no-underline"
                    target="_blank">Autorización de
                    tratamiento de datos personales</a> </mat-checkbox>
            <mat-checkbox class="ml-3" formControlName="clausulaAnticurrupcionClaracionAuto"> <a
                    href="./assets/documentos/documentosMicroForms/anticorrupcion_lavado.pdf" class="no-underline"
                    target="_blank"> Cláusula de
                    Anticorrupción y Antilavado </a></mat-checkbox>
        </div> -->


        <ng-container *ngIf="mostrarOTP">

            <span class="bg-gray-200 p-1.5 rounded-1 text-dark font-bold mt-4 mb-3">
                Validación de OTP
            </span>
            <div class="bg-white sm:px-8 px-0 pt-6 grid grid-cols-1   md:grid-cols-1">
                <!-- <mat-form-field class="w-full px-3 fuse-mat-dense">
                <mat-label>Código OTP</mat-label>
                <input matInput type="text" autocomplete="off" formControlName="numeroOTP" [disabled]="this.form.invalid" placeholder="Presionar el botón para enviar el código del celular">
                <mat-icon svgIcon="feather:check-circle" [ngClass]="{'text-green-400': this.otpValidado}" matTooltip="Verificar código OTP" class="cursor-pointer mx-2" (click)="validarCodigo()"></mat-icon>
                <mat-icon svgIcon="feather:send" [ngClass]="{'text-blue-400': this.form.valid}" class="cursor-pointer" matTooltip="Enviar código OTP" (click)="solicitarCodigo()"></mat-icon>
            </mat-form-field> -->
                <div class="w-full px-3 fuse-mat-dense flex justify-center items-center pt-4 flex-col">
                    <button mat-raised-button color="primary" type="button" style="width: 80% !important"
                        class="rounded-md cursor-pointer" [disabled]="contador !== 180 || validandoOTPLoading"
                        (click)="solicitarCodigo()">
                        {{changeTextOTP ? 'Reenviar código OTP' : 'Enviar código OTP'}}
                    </button>

                </div>

                <mat-form-field class="px-3 fuse-mat-dense mt-5" style=" width: 80% !important; margin-left: 10%;">
                    <input matInput type="text" placeholder="Código" [readonly]="otpValidado" (keyup)="validarCodigo()"
                        autocomplete="off" [formControlName]="'numeroOTP'"  min="6" max="6">
                </mat-form-field>

                <div *ngIf="contador !== 180 && !otpValidado"
                    class="w-full px-3 fuse-mat-dense flex justify-center items-center min-h-2 mt-3">
                    <mat-progress-bar style="width: 80%;" mode="determinate"
                        [value]="(contador / 180) * 100"></mat-progress-bar>
                </div>
                <div class="w-full px-3 fuse-mat-dense flex justify-center items-center min-h-10">
                    <mat-icon *ngIf="validandoOTPLoading" svgIcon="settings"
                        class="animate-spin-slow icon-size-12 mt-4"></mat-icon>
                    <mat-icon *ngIf="otpValidado" class="text-green-500 icon-size-12 mt-4"
                        svgIcon="mat_solid:check_circle"></mat-icon>
                </div>
            </div>
        </ng-container>
        <div class="flex justify-end mb-15" *ngIf="!permisoEditar">
            <button mat-raised-button color="primary" type="button" (click)="validationPost()">
                Guardar
            </button>
        </div>
    </div>
</form>