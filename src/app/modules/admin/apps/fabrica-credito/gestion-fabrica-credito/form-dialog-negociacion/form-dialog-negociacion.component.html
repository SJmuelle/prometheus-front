<h2 mat-dialog-title>Gestión de negociación</h2>

<mat-dialog-content>
  <div class="grid-cols-12 ">
    <div class="col-span-12">
      <form [formGroup]="form">
        <div class="bg-white flex flex-col">
          <div class="md:flex">
            <ng-container>
              <mat-form-field class="w-full fuse-mat-dense">
                <mat-label>Nombre con quien se negoció</mat-label>
                <input matInput type="text" placeholder="" [formControlName]="'nombreNegociador'">
              </mat-form-field>
            </ng-container>
          </div>
          <div class="md:flex">
            <ng-container >
              <mat-form-field class="w-full fuse-mat-dense">
                <mat-label>Celular donde se negoció</mat-label>
                <input matInput type="text" placeholder="" [formControlName]="'celularNegociador'">
              </mat-form-field>
            </ng-container>
          </div>
          <div class="md:flex">
            <ng-container *ngIf="this.data.evento!='NO EXITOSA'">
              <mat-form-field class="w-full fuse-mat-dense">
                <mat-label>Valor a comprar</mat-label>
                <input matInput type="text" placeholder="" [formControlName]="'valorAComprar'"
                (keyup)="form.controls['valorAComprar'].setValue(utility.formatearNumero(form.value.valorAComprar))" 
                >
              </mat-form-field>
            </ng-container>
          </div>
          <div class="md:flex">
            <ng-container *ngIf="this.data.evento!='NO EXITOSA'">
              <mat-form-field class="w-full fuse-mat-dense">
                <mat-label>Valor descuento</mat-label>
                <input matInput type="text" placeholder="" [formControlName]="'valorDescuento'"
                (keyup)="form.controls['valorDescuento'].setValue(utility.formatearNumero(form.value.valorDescuento))" 
                >
              </mat-form-field>
            </ng-container>
          </div>
          <div class="md:flex">
            <ng-container *ngIf="this.data.evento!='NO EXITOSA'">
              <mat-form-field class="w-full fuse-mat-dense">
                <mat-label>Valor consultores</mat-label>
                <input matInput type="text" placeholder="" [formControlName]="'valorConsultores'"
                (keyup)="form.controls['valorConsultores'].setValue(utility.formatearNumero(form.value.valorConsultores))" 
                
                >
              </mat-form-field>
            </ng-container>
          </div>
          <div class="md:flex">
            <ng-container *ngIf="this.data.evento!='NO EXITOSA'">
              <mat-form-field class="w-full fuse-mat-dense">
                <mat-label>Fecha limite de pagos</mat-label>
                <input matInput type="date" placeholder="" [formControlName]="'fechaLimitePago'">
              </mat-form-field>
            </ng-container>
          </div>
          <ng-container *ngIf="this.data.evento=='NO EXITOSA'">
            <div class="md:flex">
              <mat-form-field class="w-full fuse-mat-dense">
                <mat-label>Motivo por lo cual no fue exitosa
                  ({{form.controls['comentarioNegociacion'].value.length}}/800)</mat-label>
                <textarea class="h-50" matInput [formControlName]="'comentarioNegociacion'"
                  [readonly]="data.idComentario">
                          </textarea>
                <mat-error *ngIf="requeridoComentario">Este campo es requerido.</mat-error>
                <mat-error *ngIf="minimoComentario">Se requiere mínimo 10 caracteres.</mat-error>
                <mat-error *ngIf="form.controls.comentarioNegociacion.errors?.maxlength">Longitud máxima son 11 dígitos.
                </mat-error>
              </mat-form-field>
            </div>
          </ng-container>
        </div>
      </form>
    </div>
  </div>
</mat-dialog-content>
<mat-dialog-actions>
  <div class="flex flex-row items-center justify-end sm:justify-end w-full">
    <ng-container *ngIf="!data.idComentario">
      <button mat-raised-button color="primary" type="button" (click)="onGuardar()" [disabled]="form.invalid">
        Guardar
      </button>
    </ng-container>
    <button mat-raised-button class="mr-2 bg-gray-400 text-white" type="button" (click)="onCerrar()">
      Cerrar
    </button>
  </div>
</mat-dialog-actions>