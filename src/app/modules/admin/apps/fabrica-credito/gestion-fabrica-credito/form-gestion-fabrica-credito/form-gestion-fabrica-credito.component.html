<div class="bg-white h-full h-screen overflow-auto px-3 py-2 rounded-lg shadow w-full y-100" cdkScrollable>
    <div class="flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent mb-3">
        <div class="flex flex-col">
            <div class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-start py-6 px-6 md:px-8 border-b">
                <h3 class="mb-2 text-gray-900">Fabrica de crédito</h3>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <form [formGroup]="form">
                <mat-accordion multi>
                <!--Panel Datos de la solicitud-->
                <mat-expansion-panel expanded>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Datos de la solicitud
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col">
                        <div class="-mx-3 md:flex mb-2">
                            <mat-form-field class="w-full px-3 fuse-mat-dense">
                                <mat-label>No. de solicitud</mat-label>
                                <input matInput type="number" placeholder="Ingrese numero"  [formControlName]="'numeroSolicitud'">
                            </mat-form-field>
                            <mat-form-field class="w-full px-3 fuse-mat-dense">
                                <mat-label>Fecha de solicitud</mat-label>
                                <input matInput type="text" placeholder="Fecha de emisión" [formControlName]="'emision'">
                            </mat-form-field>
                            <mat-form-field class="w-full px-3 fuse-mat-dense">
                                <mat-label>Es preaprobado</mat-label>
                                <input matInput type="text" placeholder="Preaprobado" [formControlName]="'descripcionEstado'">
                            </mat-form-field>
                        </div>
                        <div class="-mx-3 md:flex mb-2">
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Estado</mat-label>
                                <input matInput type="text" placeholder="Estado" [formControlName]="'codigoEstado'">
                            </mat-form-field>
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Subestado</mat-label>
                                <input matInput type="text" placeholder="Subestado" [formControlName]="'descripcionSubestado'">
                            </mat-form-field>
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Cupo aprobado</mat-label>
                                <input matInput type="text" placeholder="Cupo aprobado" [formControlName]="'cupoTotal'">
                            </mat-form-field>
                        </div>
                        <div class="-mx-3 md:flex mb-2">
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Cupo reservado</mat-label>
                                <input matInput type="text" placeholder="Cupo reservado" [formControlName]="'cupoReservado'">
                            </mat-form-field>
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Cupo disponible</mat-label>
                                <input matInput type="text" placeholder="Cupo disponible" [formControlName]="'cupoDisponible'">
                            </mat-form-field>
                        </div>
                        <span class="bg-gray-200 p-1.5 rounded-1 mb-3 text-dark">Datos de riesgos</span>
                        <div class="-mx-3 md:flex mb-2">
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Score acierta</mat-label>
                                <input matInput type="text" placeholder="Score acierta" [formControlName]="'score'">
                            </mat-form-field>
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Descripción del score</mat-label>
                                <input matInput type="text" placeholder="Descripción" [formControlName]="'descripcionScore'">
                            </mat-form-field>
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Nivel de endeudamiento</mat-label>
                                <input matInput type="text" placeholder="Nivel de endeudamiento" [formControlName]="'nivelEndeudamiento'">
                            </mat-form-field>
                        </div>
                    </div>
                </mat-expansion-panel>
                <!--Panel datos de riesgo-->
                <!--<mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Datos de riesgo
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col">
                        <div class="-mx-3 md:flex mb-2">
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Score acierta</mat-label>
                                <input matInput type="text" placeholder="Score acierta" >
                            </mat-form-field>
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Descripción del score</mat-label>
                                <input matInput type="text" placeholder="Descripción" >
                            </mat-form-field>
                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                <mat-label>Nivel de endeudamiento</mat-label>
                                <input matInput type="text" placeholder="Nivel de endeudamiento">
                            </mat-form-field>
                        </div>
                    </div>
                    &lt;!&ndash;<mat-form-field appearance="fill">
                        <mat-label>Date</mat-label>
                        <input matInput [matDatepicker]="picker" (focus)="picker.open()" readonly>
                    </mat-form-field>
                    <mat-datepicker #picker></mat-datepicker>&ndash;&gt;
                </mat-expansion-panel>-->
                <!--Panel informacion del titular-->
                <mat-expansion-panel expanded>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Información del titular (Persona Natural / Persona Jurídica / Representante legal)
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <mat-tab-group [animationDuration]="'0'">
                        <mat-tab>
                            <ng-template matTabLabel>Datos del titular</ng-template>
                            <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col">
                                <div class="-mx-3 md:flex mb-2">
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Tipo de solicitante</mat-label>
                                        <input matInput type="text" placeholder="Tipo de solicitante" [formControlName]="'tipo'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Tipo de documento</mat-label>
                                        <input matInput type="text" placeholder="Descripción" [formControlName]="'tipoDocumento'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>No. de identificacion</mat-label>
                                        <input matInput type="text" placeholder="Identificación" [formControlName]="'identificacion'">
                                    </mat-form-field>
                                </div>
                                <div class="-mx-3 md:flex mb-2">
                                    <mat-form-field class="w-full px-3 fuse-mat-dense">
                                        <mat-label>Nombre / Razón social</mat-label>
                                        <input matInput type="text" placeholder="Nombre / Razón de social" [formControlName]="'nombreCompleto'">
                                    </mat-form-field>
                                    <mat-form-field class="w-full px-3 fuse-mat-dense">
                                        <mat-label>Fecha de matricula</mat-label>
                                        <input matInput type="text" placeholder="Nombre / Razón de social" [formControlName]="'fechaMatricula'">
                                    </mat-form-field>
                                </div>
                                <mat-divider></mat-divider>
                                <div class="-mx-3 md:flex mt-3 mb-2">
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Primer nombre</mat-label>
                                        <input matInput type="text" placeholder="Primer nombre" [formControlName]="'primerNombre'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Segundo nombre</mat-label>
                                        <input matInput type="text" placeholder="Segundo nombre" [formControlName]="'segundoNombre'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Primer apellido</mat-label>
                                        <input matInput type="text" placeholder="Primer apellido" [formControlName]="'primerApellido'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Segundo apellido</mat-label>
                                        <input matInput type="text" placeholder="Segundo apellido" [formControlName]="'segundoApellido'">
                                    </mat-form-field>
                                </div>
                                <div class="-mx-3 md:flex mt-3 mb-2">
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Teléfono / Celular </mat-label>
                                        <input matInput type="number" placeholder="Teléfono / Celular" [formControlName]="'celular'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Email</mat-label>
                                        <input matInput type="text" placeholder="Email" [formControlName]="'email'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Género</mat-label>
                                        <input matInput type="text" placeholder="Genero" [formControlName]="'genero'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Nacionalidad</mat-label>
                                        <input matInput type="text" placeholder="Nacionalidad" [formControlName]="'nacionalidad'">
                                    </mat-form-field>
                                </div>
                                <div class="-mx-3 md:flex mt-3 mb-2">
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Fecha de nacimiento </mat-label>
                                        <input matInput type="text" placeholder="Fecha de nacimiento" [formControlName]="'fechaNacimiento'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Departamento de nacimiento</mat-label>
                                        <input matInput type="text" placeholder="Departamento" [formControlName]="'codigoDepartamentoNacimiento'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Ciudad / Municipio de nacimiento</mat-label>
                                        <input matInput type="text" placeholder="Ciudad / Municipio de nacimiento" [formControlName]="'codigoCiudadNacimiento'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Tipo de vivienda</mat-label>
                                        <input matInput type="text" placeholder="Tipo de vivienda" [formControlName]="'tipoVivienda'">
                                    </mat-form-field>
                                </div>
                                <div class="-mx-3 md:flex mt-3 mb-2">
                                    <ng-container *ngIf="departamentos$ | async as departamentos">
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>Departamento de residencia</mat-label>
                                            <mat-select (selectionChange)="seleccionDepartamento($event)"
                                                        [value]="'seleccione'"
                                                        [formControlName]="'codigoDepartamento'"
                                            >
                                                <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                                <mat-option *ngFor="let departamento of departamentos.data"
                                                            [value]="departamento.codigo"
                                                >{{departamento.nombre}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="ciudades$ | async as ciudades">
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>Ciudad / municipio de residencia</mat-label>
                                            <mat-select (selectionChange)="seleccionCiudad($event)"
                                                        [value]="'seleccione'"
                                                        [formControlName]="'codigoCiudad'"
                                            >
                                                <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                                <mat-option *ngFor="let ciudad of ciudades.data"
                                                            [value]="ciudad.codigo"
                                                >{{ciudad.nombre}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="barrios$ | async as barrios">
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>Barrio</mat-label>
                                            <mat-select
                                                [value]="'seleccione'"
                                                [formControlName]="'codigoBarrio'"
                                            >
                                                <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                                <mat-option *ngFor="let barrio of barrios.data"
                                                            [value]="barrio.codigo"
                                                >{{barrio.nombre}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ng-container>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Dirección de residencia</mat-label>
                                        <input matInput type="text" placeholder="Dirección de residencia" [formControlName]="'direccionResidencial'">
                                    </mat-form-field>
                                </div>
                                <div class="-mx-3 md:flex mt-3 mb-2">
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Nivel de estudio</mat-label>
                                        <input matInput type="text" placeholder="Nivel de estudio" [formControlName]="'nivelEstudio'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>¿Vive en el mismo lugar del negocio?</mat-label>
                                        <mat-select
                                            [formControlName]="'viveEnNegocio'"
                                            [value]="'seleccione'"
                                        >
                                            <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                            <mat-option [value]="'S'">Si</mat-option>
                                            <mat-option [value]="'N'">No</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <span class="bg-gray-200 p-1.5 rounded-1 text-dark">Información financiera</span>
                                <div class="-mx-3 md:flex mt-3 mb-2">
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Compras semanalmente en cemento ($)</mat-label>
                                        <input matInput type="text" placeholder="Ingrese valor" [formControlName]="'comprasSemanales'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Antiguedad compras (meses)</mat-label>
                                        <input matInput type="text" placeholder="" [formControlName]="'antiguedadComprasSemanales'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Ventas mensuales ($)</mat-label>
                                        <input matInput type="text" placeholder="" [formControlName]="'ventasMensuales'">
                                    </mat-form-field>
                                </div>
                                <div class="-mx-3 md:flex mt-3 mb-2">
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>Activo ($)</mat-label>
                                        <input matInput type="text" placeholder="" [formControlName]="'activos'">
                                    </mat-form-field>
                                    <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                        <mat-label>¿Es declarante?</mat-label>
                                        <mat-select
                                            [formControlName]="'declarante'"
                                            [value]="'seleccione'"
                                        >
                                            <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                            <mat-option [value]="'S'">Si</mat-option>
                                            <mat-option [value]="'N'">No</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <ng-container *ngIf="form.controls['tipoDocumento'].value != 'NIT'">
                                    <span class="bg-gray-200 p-1.5 rounded-1 text-dark">Información del negocio</span>
                                    <div class="-mx-3 md:flex mt-3 mb-2">
                                        <ng-container *ngIf="departamentos$ | async as departamentos">
                                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                                <mat-label>Departamento del negocio</mat-label>
                                                <mat-select (selectionChange)="seleccionDepartamento($event)"
                                                            [value]="'seleccione'"
                                                            [formControlName]="'codigoDepartamentoNegocio'"
                                                >
                                                    <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                                    <mat-option *ngFor="let departamento of departamentos.data"
                                                                [value]="departamento.codigo"
                                                    >{{departamento.nombre}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </ng-container>
                                        <ng-container *ngIf="ciudades$ | async as ciudades">
                                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                                <mat-label>Ciudad / municipio del negocio</mat-label>
                                                <mat-select (selectionChange)="seleccionCiudad($event)"
                                                            [value]="'seleccione'"
                                                            [formControlName]="'codigoCiudadNegocio'"
                                                >
                                                    <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                                    <mat-option *ngFor="let ciudad of ciudades.data"
                                                                [value]="ciudad.codigo"
                                                    >{{ciudad.nombre}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </ng-container>
                                        <ng-container *ngIf="barrios$ | async as barrios">
                                            <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                                <mat-label>Barrio</mat-label>
                                                <mat-select
                                                    [value]="'seleccione'"
                                                    [formControlName]="'codigoBarrioNegocio'"
                                                >
                                                    <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                                    <mat-option *ngFor="let barrio of barrios.data"
                                                                [value]="barrio.codigo"
                                                    >{{barrio.nombre}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </ng-container>
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>Direccion del negocio</mat-label>
                                            <input matInput type="text" placeholder="" [formControlName]="'direccionNegocio'">
                                        </mat-form-field>
                                    </div>
                                    <div class="-mx-3 md:flex mt-3 mb-2">
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>Teléfono del negocio</mat-label>
                                            <input matInput type="text" placeholder="" [formControlName]="'telefonoNegocio'">
                                        </mat-form-field>
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>¿Hace cuanto tiempo funciona el negocio? (meses)</mat-label>
                                            <input matInput type="number" placeholder="" [formControlName]="'antiguedadNegocio'">
                                        </mat-form-field>
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>¿Se encuentra registrado en camára de comercio?</mat-label>
                                            <mat-select
                                                [formControlName]="'camaraComercio'"
                                                [value]="'seleccione'"
                                            >
                                                <mat-option disabled [value]="'seleccione'">Seleccione</mat-option>
                                                <mat-option [value]="'S'">Si</mat-option>
                                                <mat-option [value]="'N'">No</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <mat-form-field class="w-1/2 px-3 fuse-mat-dense">
                                            <mat-label>Nit</mat-label>
                                            <input matInput type="number" placeholder="" [formControlName]="'nitNegocio'">
                                        </mat-form-field>
                                    </div>
                                </ng-container>
                                <div class="-mx-3 md:flex mt-3 mb-2 mr-1 justify-end">
                                    <button mat-raised-button
                                            color="primary"
                                            type="button"
                                            [disabled]="!form.valid"
                                            (click)="onPostDatos()"
                                    >
                                        Guardar
                                    </button>
                                </div>
                            </div>
                        </mat-tab>
                        <ng-container *ngIf="form.controls['tipoDocumento'].value != 'CC'">
                            <mat-tab>
                                <ng-template matTabLabel>Representante legal</ng-template>
                                <app-form-representante-legal></app-form-representante-legal>
                            </mat-tab>
                        </ng-container>
                        <mat-tab>
                            <ng-template matTabLabel>Referencias</ng-template>
                        </mat-tab>
                        <mat-tab>
                            <ng-template matTabLabel>Documentación</ng-template>
                        </mat-tab>
                        <mat-tab>
                            <ng-template matTabLabel>Politicas</ng-template>
                        </mat-tab>
                        <mat-tab>
                            <ng-template matTabLabel>Nivel de endeudamiento</ng-template>
                        </mat-tab>
                    </mat-tab-group>
                </mat-expansion-panel>
            </mat-accordion>
            </form>
        </div>
    </div>
</div>
<!--<code>
    <pre>{{form.getRawValue() | json}}</pre>
</code>-->
